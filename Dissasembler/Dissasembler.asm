;2013.11.22
.model small
.stack 100h
.data
	Help_Message_1 db 10, 13, "Dominik Gabriel Lisovski", 10, 13
	Help_Message_2 db "Vilnius University, Faculty of Mathematics and Informatics", 10, 13
	Help_Message_3 db "Software Engineering", 10, 13
	Help_Message_4 db "6th group ", 10, 13, "Disassembler", 10, 13
	Error_Message_1 db "You have to enter input and output files in parameters", 13, 10, "$"
	Error_Message_2 db " "
	Error_Message_3 db " "
	Error_Message_4 db " "
	Error_Message_5 db " "
	Error_Message_6 db " "
	Error_Message_7 db " "
	Error_Message_8 db " "
	Input_file db 100 dup (0)
	Output_file db 100 dup (0)
.code
Start:
	Mov Bx, @Data
	Mov DS, Bx
	Mov Bx, 81h
	Xor Di, Di
	Xor Si, Si
	Call Check_Parameters_1
	Jmp Exit
;**********************************************************************************************
;Working with parameters
;**********************************************************************************************
Check_Parameters_0:
	Inc Bx
;**********************************************************************************************
Check_Parameters_1:
	Mov Ax, [Es:Bx]
	Cmp Al, 0Dh									;Enter symbol
	Jne Check_Parameters_2
	Jmp Error_1
;**********************************************************************************************
Check_Parameters_2:
	Cmp Al, 20h									;Space symbol
	Je Check_Parameters_0
	Cmp Ax, '?/'
	Je Help_Check_1
	Jmp Form_Input_File_1
;**********************************************************************************************
Help_Check_1:
	Mov Ax, [Es:Bx]
	Cmp Al, 0Dh									;Enter symbol
	Je Help_Check_2
	Jmp Error_1
;**********************************************************************************************
Help_Check_2:
	Mov Dx, offset Help_Message_1
	Jmp Print_Message
;**********************************************************************************************
Form_Input_File_1:
	Mov Ax, [Es:Bx]
	Cmp Al, 20h									;Space symbol
	Je Form_Output_File_1
	Cmp Al, 0Dh									;Enter symbol
	Jne Form_Input_File_2
	Jmp Error_1
;**********************************************************************************************
Form_Input_File_2:
	Mov [Input_file + Si], Al
	Inc Si
	Inc Bx
	Jmp Form_Input_File_1
;**********************************************************************************************
Form_Output_File_1:
	Inc Bx
	Mov Ax, [Es:Bx]
	Cmp Al, 20h									;Space symbol
	Jne Form_Output_File_2
	Jmp Error_1
;**********************************************************************************************
Form_Output_File_2:
	Cmp Al, 0Dh									;Enter symbol
	Je Return
	Mov [Output_file + Di], Al
	Inc Di
	Jmp Form_Output_File_1
;**********************************************************************************************
Return:
	Ret
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************
;**********************************************************************************************

;**********************************************************************************************
;Error Messages
;**********************************************************************************************
Error_1:
;**********************************************************************************************
	Mov Dx, Offset Error_Message_1
	Jmp Print_Message
;**********************************************************************************************
Print_Message:
	Mov ah, 9
	Int 21h
;**********************************************************************************************
Exit:
	Mov ax, 4C00h
	int 21h
;**********************************************************************************************	
end Start